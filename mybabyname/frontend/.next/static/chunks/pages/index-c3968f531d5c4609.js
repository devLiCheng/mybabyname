(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1236)}])},1236:function(e,s,a){"use strict";let l;a.r(s),a.d(s,{default:function(){return E}});var n=a(5893),t=a(6394),i=a.n(t),c=a(7294);function o(e,s){localStorage.setItem(e,s)}function r(e){return localStorage.getItem(e)}function d(){localStorage.clear()}let m="access_token",h="USER_INFO";var x=a(6154),u=a(3454);let j=u.env.NEXT_PUBLIC_HOST||"/api",g=x.Z.create({baseURL:j,timeout:5e3,headers:{Authorization:r(m)}});g.interceptors.request.use(e=>(console.log("token----->",sessionStorage.getItem("access_token")),e.headers["Content-Type"]="application/json",e.headers.Authorization=r(m),l&&l.cancel("Operation canceled by the user."),l=x.Z.CancelToken.source(),e.cancelToken=l.token,e),e=>Promise.reject(e)),g.interceptors.response.use(e=>e.data,async e=>{if(x.Z.isCancel(e))console.log("Request canceled:",e.message);else if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录";break;default:e.message="服务端异常，请联系管理员"}return Promise.reject(e)});let p={get:(e,s,a)=>g.get(e,{params:s,...a}),post:(e,s,a)=>g.post(e,s,a),put:(e,s,a)=>g.put(e,s,a),delete:(e,s,a)=>g.delete(e,{data:s,...a})};function v(e){let{loginRegister:s}=e;return(0,n.jsx)(c.Fragment,{children:(0,n.jsx)("div",{className:"login",onClick:s,children:"登录/注册"})})}function f(e){let{userInfo:s}=e,[a,l]=(0,c.useState)(void 0),[t,i]=(0,c.useState)(!1),{username:o,image:m}=s;(0,c.useEffect)(()=>{if(void 0===a){console.log("未登录会不会一直走这里");let e=r("access_token");e&&l({"Content-Type":"application/json",Authorization:e})}},[a]),(0,c.useEffect)(()=>{t&&(d(),window.location.reload())},[t]);let h=async()=>{if(a)try{let{code:e,data:s,message:l}=await p.post("auth/logout",{},a);console.log(),0===e&&(console.log(l||"退出系统"),i(!0))}catch(e){console.log(e)}};return(0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)("div",{className:"afer-login",children:o}),(0,n.jsx)("div",{className:"after-login-img",children:(0,n.jsx)("img",{src:""!==m&&null!==m||"/images/user.png",alit:o})}),(0,n.jsx)("div",{className:"logOut",onClick:h})]})}function N(e){let{userInfo:s,loginRegister:a}=e;return s?(0,n.jsx)(f,{userInfo:s}):(0,n.jsx)(v,{loginRegister:a})}function w(e){let{children:s,visible:a,toggleModal:l}=e;console.log("visible---->",a,l);let[t,i]=(0,c.useState)(void 0);return(0,c.useLayoutEffect)(()=>{if(!t){let e=r(h);i(JSON.parse(e))}},[t]),(0,n.jsx)("div",{className:"header_component",children:(0,n.jsxs)("div",{className:"nav",children:[(0,n.jsx)("div",{className:"site_name",children:"宝宝取名网"}),(0,n.jsx)("div",{className:"sit_nav",children:(0,n.jsxs)("div",{className:"menu-list",children:[(0,n.jsx)("a",{href:"",children:"首页"}),(0,n.jsx)("a",{href:"",children:"名字大全"}),(0,n.jsx)("a",{href:"",children:"热门名字"}),(0,n.jsx)("a",{href:"",children:"起名案例"}),(0,n.jsx)("a",{href:"",children:"名字解析"})]})}),(0,n.jsx)("div",{className:"register_logIn",children:(0,n.jsx)(N,{userInfo:t,loginRegister:()=>{l&&l(!0)}})})]})})}function y(){return(0,n.jsxs)("div",{className:"first-page-component",children:[(0,n.jsx)("div",{className:"img-one"}),(0,n.jsx)("div",{className:"img-two"}),(0,n.jsx)("div",{className:"img-three"}),(0,n.jsx)("h1",{className:"web-site-name",children:"宝宝取名网"}),(0,n.jsx)("p",{className:"web-site-slogan",children:"宝宝取名网是一个专业为您的宝宝免费取名的平台,提供各种有创意、有意义的名字。我们有多年的命名经验,为您的宝宝取一个好名字,帮助他们开启美好人生。"})]})}function b(){return(0,n.jsxs)("div",{className:"two-page-component",children:[(0,n.jsx)("div",{className:"just-born"}),(0,n.jsxs)("div",{className:"des-name",children:[(0,n.jsx)("h2",{children:"给小宝宝取名"}),(0,n.jsx)("p",{children:"欢迎来到给小宝宝取名网站！在这里,您可以找到一些有关给宝宝取名的灵感和建议。无论您是准妈妈还是准爸爸,我们都希望能够帮助您为宝宝取到一个美丽、有意义的名字。"}),(0,n.jsx)("span",{children:"开始起名"})]})]})}function k(){return(0,n.jsx)("div",{className:"three-page-component"})}var _=a(6486);let C={surname:"",sex:"",data:[]};function S(e){let{visible:s,toggleModal:a,flushLogin:l}=e,[t,i]=(0,c.useState)(C),[x,u]=(0,c.useState)(!1),[j,g]=(0,c.useState)({email:"",password:""}),[v,f]=(0,c.useState)(!1),[N,w]=(0,c.useState)(!1),[y,b]=(0,c.useState)(350),[k,S]=(0,c.useState)({surname:"",gender:"",birthDatetime:"",keyword:"",description:""}),[E,I]=(0,c.useState)(void 0),T=e=>{a&&a(e)};(0,c.useEffect)(()=>{if(void 0===E){console.log("未登录会不会一直走这里");let e=r("access_token");e&&I({timeout:99e3,"Content-Type":"application/json",Authorization:e})}},[E]),(0,c.useEffect)(()=>{s&&b(window.scrollY+350)},[s]),(0,c.useEffect)(()=>{v&&(alert("登录过期，请重重新登陆"),d(),T(!0))},[v]);let O=(0,_.debounce)((e,s)=>{g({...j,[e]:s})},500),P=async e=>{let{birthDatetime:s,description:a,surname:l,keyword:n,gender:c}=e;try{w(!0);let e="/toGenerateName?".concat(new URLSearchParams({birthDatetime:s,description:a,surname:l,keyword:n,gender:c}).toString()),{code:o,data:r,message:d}=await p.get(e);console.log("gpt生成的名字",o,r,d),200===o&&Array.isArray(r.data)&&(window.scrollTo(0,150),i(r),u(!0)),console.log("names",t),w(!1)}catch(s){var o;w(!1);let e=(null==s?void 0:null===(o=s.response)||void 0===o?void 0:o.status)===401;e?(f(!0),console.log("从新登录")):console.log(s)}},U=e=>{let{birthDatetime:s,description:a,surname:l,keyword:n,gender:t}=e;console.log("性别",t);let i={status:!0,msg:""};return(""===s||null==s)&&(i.msg="请填写出生年月日",i.status=!1),(""===a||null==a)&&(i.msg="请填写描述，描述越丰富，名字越好",i.status=!1),(""===l||null==l)&&(i.msg="请填写姓氏",i.status=!1),(""===t||null==t)&&(i.msg="请填选择性别",i.status=!1),i},A=async()=>{if(console.log("表格数据",k),E){let{birthDatetime:e,description:s,surname:a,keyword:l,gender:n}=k,{status:t,msg:i}=U({birthDatetime:e,description:s,surname:a,keyword:l,gender:n});if(!t){alert(i);return}await P({birthDatetime:e,description:s,surname:a,keyword:l,gender:n});return}T(!0),console.log("还未注册，先将用户信息存起来，注册后，自动填写到表单")};async function R(e){try{let s=await p.get("findUserByName/".concat(e));return s}catch(e){console.log(e)}}async function z(e){let{username:s,password:a}=e;try{let e=await p.post("/auth/login",{username:s,password:a});return console.log("登录接口返回的值",e),e}catch(e){console.log(e)}}async function B(e){let{email:s,password:a,username:l}=e;try{let e=await p.post("/addUser",{email:s,password:a,username:l});return console.log("注册接口",e),e}catch(e){console.log(e)}}async function L(e){try{let{code:s,data:a}=await p.get("getUserById/".concat(e));0===s&&(console.log("这是用户信息",a),o(h,JSON.stringify(a)),T(!1),l(!0))}catch(e){console.log(e)}}let M=async()=>{var e;d(),console.log("start reg",j);let s=(e=j.email,/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)),a=""!==j.password,l=async()=>{try{let e=await z({username:j.email,password:j.password});if(console.log("logined",e),0===e.code){let s="".concat("Bearer"," ").concat(e.data.access_token);o(m,s),await L(e.data.userId),console.log("登录成功",e)}else alert(e.message||"登录失败，请检查用户名密码")}catch(e){console.log(e)}};if(!s){alert("邮箱格式不对");return}if(!a){alert("密码不能为空");return}if(s&&a){let{code:e,data:s}=await R(j.email),a=0===e&&s;if(a&&await l(),!a){let e=await B({email:j.email,password:j.password,username:j.email});0===e.code?await l():alert(e.message||"注册失败,请重试！")}return}T(!1)},D=e=>{let s=e.target.value,a=e.target.name;O(a,s)};(0,c.useEffect)(()=>()=>{O.cancel()},[]);let F=(e,s)=>{console.log("性别----》",e.target.value);let a=e.target.value;S({...k,[s]:a})},X=(e,s)=>{S({...k,[s]:e})};return(0,n.jsxs)("div",{className:"form-component",children:[(0,n.jsx)("h2",{className:"form-title",children:"填写宝宝信息"}),(0,n.jsx)("p",{className:"form-des",children:"请填写以下信息以帮助我们为您的宝宝取名。"}),(0,n.jsxs)("div",{className:"form",children:[(0,n.jsxs)("div",{className:"item-row",children:[(0,n.jsx)("div",{className:"item-col",children:(0,n.jsxs)("div",{className:"form-item",children:[(0,n.jsx)("span",{children:"宝宝姓氏"}),(0,n.jsx)("input",{placeholder:"请输入宝宝姓氏",value:k.surname,onChange:e=>F(e,"surname")})]})}),(0,n.jsx)("div",{className:"item-col",children:(0,n.jsxs)("div",{className:"form-item",children:[(0,n.jsx)("span",{children:"邮箱"}),(0,n.jsx)("input",{placeholder:"请输入你的邮箱"})]})})]}),(0,n.jsxs)("div",{className:"item-row",children:[(0,n.jsx)("div",{className:"item-col",children:(0,n.jsxs)("div",{className:"form-item",children:[(0,n.jsx)("span",{children:"出生日期"}),(0,n.jsx)("input",{placeholder:"请输入宝宝的出生日期",value:k.birthDatetime,onChange:e=>F(e,"birthDatetime")})]})}),(0,n.jsx)("div",{className:"item-col",children:(0,n.jsxs)("div",{className:"form-item",children:[(0,n.jsx)("span",{children:"性别"}),(0,n.jsxs)("div",{className:"gender",children:[(0,n.jsx)("input",{className:"male",type:"radio",name:"gender",value:k.gender,onChange:e=>X("男","gender")}),(0,n.jsx)("label",{children:"男"}),(0,n.jsx)("input",{className:"female",type:"radio",name:"gender",value:k.gender,onChange:e=>X("女","gender")}),(0,n.jsx)("label",{children:"女"})]})]})})]}),(0,n.jsx)("div",{className:"more-info",children:(0,n.jsxs)("div",{className:"item",children:[(0,n.jsx)("span",{children:"更多的祝愿"}),(0,n.jsx)("textarea",{name:"message",rows:"4",cols:"50",value:k.description,placeholder:"描写的越详细出来的结果更好",onChange:e=>F(e,"description")})]})}),(0,n.jsxs)("div",{className:"checkbox-list",children:[(0,n.jsx)("div",{className:"options-label",children:"关键词"}),(0,n.jsxs)("div",{className:"options",children:[(0,n.jsxs)("div",{className:"checkbox-item",children:[(0,n.jsx)("input",{type:"checkbox",name:"option1",value:"1"}),(0,n.jsx)("label",{children:"喜庆"})]}),(0,n.jsxs)("div",{className:"checkbox-item",children:[(0,n.jsx)("input",{type:"checkbox",name:"option1",value:"2"}),(0,n.jsx)("label",{children:"寓意深远"})]}),(0,n.jsxs)("div",{className:"checkbox-item",children:[(0,n.jsx)("input",{type:"checkbox",name:"option1",value:"3"}),(0,n.jsx)("label",{children:"文雅"})]}),(0,n.jsxs)("div",{className:"checkbox-item",children:[(0,n.jsx)("input",{type:"checkbox",name:"option1",value:"4"}),(0,n.jsx)("label",{children:"时尚"})]}),(0,n.jsxs)("div",{className:"checkbox-item",children:[(0,n.jsx)("input",{type:"checkbox",name:"option1",value:"5"}),(0,n.jsx)("label",{children:"独特"})]}),(0,n.jsxs)("div",{className:"checkbox-item",children:[(0,n.jsx)("span",{children:"其它"}),(0,n.jsx)("input",{type:"text",name:"option1",placeholder:"多个关键词用逗号隔开"})]})]})]}),(0,n.jsx)("div",{className:"start-generator-name",children:(0,n.jsx)("button",{onClick:A,children:"开始起名"})})]}),(0,n.jsxs)("div",{className:"footer",children:[(0,n.jsx)("div",{className:"footer-base-col left-copyright",children:(0,n.jsxs)("div",{className:"copyright",children:["宝宝起名网 \xa92023 产品版权所有。保留所有权利 ",(0,n.jsx)("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",children:"鄂ICP备2023010334号"})]})}),(0,n.jsxs)("div",{className:"footer-base-col right-link",children:[(0,n.jsx)("a",{href:"next/index",children:"隐私政策"}),(0,n.jsx)("a",{href:"next/index",children:"服务条款"}),(0,n.jsx)("a",{href:"next/index",children:"Cookie设置"})]})]}),(0,n.jsx)("div",{className:"generator-name-mask",style:{display:N?"block":"none"}}),(0,n.jsx)("div",{className:"generator-name-tips",style:{display:N?"flex":"none"},children:"正在生成名字，请等待....."}),s&&(0,n.jsx)("div",{className:"mask",id:"mask"}),s&&(0,n.jsxs)("div",{className:"login-modal",id:"loginModal",style:{top:y+"px"},children:[(0,n.jsx)("i",{className:"login-modal-close",onClick:()=>T(!1),children:"关闭"}),(0,n.jsx)("h3",{children:"欢迎加入我们"}),(0,n.jsx)("p",{children:"注册后可将宝宝名字及解析发送到您的邮箱，还可获取更多精彩内容"}),(0,n.jsx)("input",{type:"email",name:"email",placeholder:"请输入邮箱",onChange:D}),(0,n.jsx)("input",{type:"password",name:"password",placeholder:"请输入密码",onChange:D}),(0,n.jsx)("button",{className:"login-register",onClick:M,children:"登录/注册"}),(0,n.jsx)("div",{className:"more-option"})]}),x&&(0,n.jsx)("div",{className:"mask",id:"mask"}),x&&(0,n.jsxs)("div",{className:"login-modal names-modal",id:"loginModal",style:{top:y+"px"},children:[(0,n.jsx)("i",{className:"login-modal-close",onClick:()=>{i(C),u(!1)},children:"关闭"}),(0,n.jsxs)("div",{className:"name-list",children:[(0,n.jsxs)("div",{className:"name-top",children:[(0,n.jsxs)("strong",{className:"surname",children:["姓： ",t.surname]}),(0,n.jsxs)("strong",{className:"sex",children:["性别： ","boy"===t.sex?"男":"女"]})]}),t.data.map((e,s)=>{var a;return(0,n.jsxs)("div",{className:"name-item",children:[(0,n.jsx)("div",{className:"name-item-name",children:e.name}),(0,n.jsxs)("div",{className:"name-item-tag",children:[(0,n.jsx)("span",{className:"weigth",children:"用字分析："}),e.tag]}),(null==e?void 0:null===(a=e.description)||void 0===a?void 0:a.length)>0&&(0,n.jsxs)("div",{className:"name-item-description",children:[(0,n.jsx)("span",{className:"weigth",children:"意蕴内涵："}),e.description," "]})]},s)})]})]})]})}function E(e){let{info:s}=e,[a,l]=(0,c.useState)(!1),t=e=>l(e);return(0,n.jsxs)("div",{className:i().main,children:[(0,n.jsx)(w,{visible:a,toggleModal:t}),(0,n.jsx)(y,{}),(0,n.jsx)(b,{}),(0,n.jsx)(k,{}),(0,n.jsx)(S,{visible:a,toggleModal:t})]})}},6394:function(){}},function(e){e.O(0,[662,18,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);